<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ঈদ মোবারক শুভেচ্ছা</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Hind Siliguri', 'Noto Naskh Arabic', sans-serif;
            margin: 0;
            padding: 20px 0;
            background: linear-gradient(135deg, #004d40, #00796b, #004d40);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; 
            min-height: 100vh;
            text-align: center;
            overflow-x: hidden;
        }

        #fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container { /* Main content box */
            background-color: rgba(0, 0, 0, 0.6);
            padding: 25px 35px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            max-width: 90%;
            width: 420px;
            z-index: 1;
            margin-bottom: 30px;
        }

        #eidImage {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 3px solid #ffd700;
            display: block;
        }

        #greetingMessage {
            font-size: 2.2em;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInScale 1.2s 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        #animatedSenderName {
            font-size: 1.6em;
            font-weight: bold;
            color: #f0f0f0;
            margin-bottom: 25px;
            display: block;
            opacity: 0;
            animation: fadeInSlideUp 1s 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards, 
                         pulse 2.5s 2s infinite ease-in-out;
        }
        
        @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.8) translateY(20px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes fadeInSlideUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .input-area { margin-top: 20px; display: flex; flex-direction: column; gap: 12px; }
        #nameInput { padding: 14px 18px; border: 2px solid #ffd700; border-radius: 8px; font-size: 1em; font-family: 'Hind Siliguri', sans-serif; background-color: rgba(255, 255, 255, 0.1); color: #fff; text-align: center; transition: box-shadow 0.3s ease; }
        #nameInput::placeholder { color: #bbb; }
        #nameInput:focus { outline: none; box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.5); }
        #generateButton { background-color: #25D366; color: white; padding: 12px 18px; border: none; border-radius: 8px; font-size: 1.1em; font-family: 'Hind Siliguri', sans-serif; font-weight: bold; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; display: flex; align-items: center; justify-content: center; gap: 8px; }
        #generateButton:hover { background-color: #1DAE50; transform: translateY(-2px) scale(1.02); }
        #generateButton:active { transform: translateY(0px) scale(1); }
        #generateButton svg { width: 24px; height: 24px; fill: white; }

        #shareLinkDisplay { margin-top: 25px; padding: 10px; background-color: rgba(0,0,0,0.2); border-radius: 8px; font-size: 0.9em; word-break: break-all; }
        #shareLinkDisplay p { margin: 0 0 8px 0; }
        #shareLinkDisplay a { color: #80cbc4; text-decoration: none; }
        #shareLinkDisplay a:hover { text-decoration: underline; color: #a7ffeb; }
        #copyLinkButton { margin-left: 10px; padding: 6px 12px; font-size: 0.9em; background-color: #546e7a; color: white; border:none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        #copyLinkButton:hover { background-color: #78909c; }
        
        .footer-credit { margin-top: 30px; font-size: 0.85em; color: #b0bec5; }
        .footer-credit a { color: #ffd700; text-decoration: none; }
        .footer-credit a:hover { text-decoration: underline; }

        .ad-placeholder-container { margin: 20px auto; display: flex; justify-content: center; align-items: center; overflow: hidden; width: 100%; }
        .ad-placeholder-container > div, .ad-placeholder-container > ins { max-width: 100%; }
        .ad-size-468x60 { width: 468px; min-height: 60px; max-width: 100%; }
        .ad-size-300x250 { width: 300px; min-height: 250px; max-width: 100%; }
        .ad-size-728x90 { width: 728px; min-height: 90px; max-width: 100%; }
        .ad-size-native { max-width: 100%; width: auto; min-height: 100px; }
    </style>
</head>
<body>
    <div id="fireworks-container"></div>
    <div class="container">
        <img id="eidImage" src="eidmubarak.gif" alt="ঈদ মোবারক অ্যানিমেশন" loading="lazy"> <!-- Added loading="lazy" -->
        <h1 id="greetingMessage">ঈদ মোবারক!</h1>
        <span id="animatedSenderName" style="display: none;"></span>
        <div class="input-area">
             <label for="nameInput" style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border-width: 0;">আপনার নাম</label>
            <input type="text" id="nameInput" placeholder="আপনার নাম লিখুন" maxlength="50" aria-label="আপনার নাম">
            <button id="generateButton" title="শুভেচ্ছা তৈরি ও শেয়ার করুন">
                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M16.75,13.96C17,14.09 17.16,14.18 17.22,14.29C17.28,14.41 17.31,14.53 17.31,14.65C17.31,14.77 17.28,14.89 17.22,15C17.16,15.12 17.09,15.22 17,15.33C16.74,15.55 16.5,15.71 16.22,15.79C15.94,15.87 15.66,15.87 15.4,15.79C15.14,15.71 14.9,15.55 14.68,15.33C14.57,15.22 14.5,15.12 14.44,15C14.38,14.89 14.35,14.77 14.35,14.65C14.35,14.53 14.38,14.41 14.44,14.29C14.5,14.18 14.57,14.08 14.68,13.96C14.9,13.75 15.14,13.58 15.42,13.5C15.7,13.42 15.98,13.42 16.26,13.5C16.52,13.58 16.76,13.74 16.95,13.96H16.75M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22C13.25,22 14.45,21.8 15.55,21.4C15.55,21.4 15.55,21.4 15.55,21.4L15.69,21.34L15.69,21.34C16.69,20.86 17.61,20.22 18.36,19.46L18.41,19.41C19.16,18.66 19.79,17.74 20.27,16.73L20.32,16.59C20.79,15.47 21,14.27 21,13V12C21,11.75 21,11.5 21,11.26C21,6.59 16.97,3 12.31,3C12.21,3 12.1,3 12,3M8.47,6.5C8.62,6.5 8.77,6.5 8.93,6.56C9.05,6.59 9.16,6.63 9.27,6.69C9.27,6.69 9.28,6.69 9.28,6.7C9.62,6.86 9.93,7.09 10.17,7.38L10.22,7.44C10.47,7.72 10.69,8.04 10.85,8.39L10.86,8.42C10.92,8.54 10.97,8.67 11,8.81C11.03,8.91 11.05,9.03 11.05,9.14C11.05,9.39 10.95,9.64 10.78,9.83C10.61,10.03 10.37,10.15 10.12,10.17C10.04,10.17 9.96,10.17 9.88,10.17C9.63,10.17 9.38,10.08 9.18,9.91C8.99,9.74 8.87,9.5 8.85,9.25C8.85,9.13 8.87,9.02 8.9,8.91C8.97,8.66 9.07,8.41 9.22,8.19C9.37,7.97 9.56,7.78 9.78,7.63C9.63,7.47 9.46,7.34 9.27,7.24C9.12,7.13 8.96,7.06 8.79,7C8.62,6.94 8.43,6.91 8.23,6.91C7.83,6.91 7.45,7 7.11,7.17C6.71,7.34 6.38,7.61 6.12,7.94L6.09,7.98C5.82,8.31 5.63,8.7 5.53,9.12C5.46,9.37 5.43,9.62 5.43,9.88C5.43,10.44 5.6,10.97 5.92,11.41C6.24,11.85 6.69,12.18 7.21,12.35C7.41,12.42 7.62,12.47 7.83,12.47C7.92,12.47 8,12.47 8.09,12.45C8.47,12.39 8.83,12.21 9.12,11.93C9.41,11.66 9.62,11.3 9.73,10.91C9.76,10.8 9.78,10.68 9.78,10.56C9.78,10.31 9.68,10.06 9.5,9.88C9.33,9.69 9.09,9.57 8.83,9.54C8.76,9.54 8.68,9.54 8.59,9.54C8.37,9.54 8.14,9.6 7.95,9.72C7.76,9.84 7.61,10.03 7.52,10.23C7.59,10.24 7.67,10.26 7.74,10.26C7.93,10.26 8.12,10.2 8.29,10.09C8.46,9.99 8.6,9.83 8.69,9.65C8.78,9.47 8.82,9.28 8.82,9.08C8.82,8.74 8.7,8.43 8.47,8.19M12,4C16.41,4 20,7.59 20,12C20,13.03 19.81,14.03 19.46,14.94C18.79,17.37 17.38,19.23 15.31,20.21C15.31,20.21 15.31,20.21 15.3,20.21C14.28,20.73 13.16,21 12,21C7.59,21 4,17.41 4,12S7.59,3 12,3C12.07,3 12.15,3 12.22,3L12,4M12,6.08A5.92,5.92 0 0,0 6.08,12A5.92,5.92 0 0,0 12,17.92A5.92,5.92 0 0,0 17.92,12A5.92,5.92 0 0,0 12,6.08Z"></path></svg>
                শেয়ার করুন
            </button>
        </div>
        <div id="shareLinkDisplay" style="display:none;">
            <p>এই লিঙ্কটি শেয়ার করুন:</p>
            <a id="generatedLink" href="#" target="_blank" rel="noopener noreferrer"></a>
            <button id="copyLinkButton" title="লিঙ্ক কপি করুন">কপি</button>
        </div>
        <p class="footer-credit">Eid Mubarak Card Generator © <span id="currentYear"></span></p> <!-- Added current year span -->
    </div>

    <!-- Adsterra Banner 468x60 -->
    <div class="ad-placeholder-container ad-size-468x60">
        <script type="text/javascript">
            atOptions = { 'key' : '1eb002b81361b30fa84b6007bc6fad09', 'format' : 'iframe', 'height' : 60, 'width' : 468, 'params' : {} };
        </script>
        <script type="text/javascript" src="//genuinelyunacceptableweep.com/1eb002b81361b30fa84b6007bc6fad09/invoke.js" async></script>
    </div>
    <!-- Advertica Banner 468x60 -->
    <div class="ad-placeholder-container ad-size-468x60">
        <ins style="width: 468px;height:60px" data-width="468" data-height="60" class="kb834c675d4" data-domain="//bcyxwn.click" data-affquery="/dfdef6a08e830aacbbf7/b834c675d4/?placementName=default"><script src="//bcyxwn.click/js/responsive.js" async></script></ins>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@latest/dist/fireworks.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('nameInput');
            const generateButton = document.getElementById('generateButton');
            const greetingMessage = document.getElementById('greetingMessage');
            const animatedSenderName = document.getElementById('animatedSenderName');
            const shareLinkDisplay = document.getElementById('shareLinkDisplay');
            const generatedLinkText = document.getElementById('generatedLink');
            const copyLinkButton = document.getElementById('copyLinkButton');
            const fireworksContainer = document.getElementById('fireworks-container');
            const currentYearSpan = document.getElementById('currentYear'); // Get current year span

             if (currentYearSpan) { // Set current year
                currentYearSpan.textContent = new Date().getFullYear();
            }

            let fireworksInstance = null;
            function startFireworks() { /* ... (rest of the JS is same as your last working version) ... */
                 if (!fireworksInstance && typeof Fireworks !== 'undefined') {
                    fireworksInstance = new Fireworks(fireworksContainer, {
                        maxRockets: 5, rocketSpawnInterval: 150, numParticles: 100,
                        explosionMinHeight: 0.2, explosionMaxHeight: 0.9, explosionChance: 0.08,
                        speed: 4, acceleration: 1.06, delay: { min: 10, max: 25 }
                    });
                    fireworksInstance.start();
                }
            }
            startFireworks();

            const urlParams = new URLSearchParams(window.location.search);
            const rawSenderName = urlParams.get('name');

            if (rawSenderName) {
                const decodedSenderName = decodeURIComponent(rawSenderName);
                animatedSenderName.textContent = `From: ${decodedSenderName}`;
                animatedSenderName.style.display = 'block';
                nameInput.placeholder = "এবার আপনার নাম লিখুন";
            } else {
                nameInput.placeholder = "আপনার নাম লিখুন";
            }
            greetingMessage.style.opacity = '1';
            if (animatedSenderName.style.display === 'block') {
                 animatedSenderName.style.opacity = '1';
            }

            generateButton.addEventListener('click', async () => {
                const currentNameRaw = nameInput.value.trim();
                if (!currentNameRaw) {
                    alert('অনুগ্রহ করে আপনার নাম লিখুন।');
                    nameInput.focus();
                    return;
                }
                const baseUrl = window.location.origin + window.location.pathname;
                const newLink = `${baseUrl}?name=${encodeURIComponent(currentNameRaw)}`;
                const shareTextFrom = rawSenderName ? `"${decodeURIComponent(rawSenderName)}"` : "আপনার বন্ধু";
                const sharePrompt = rawSenderName ? `আপনিও আপনার নামে শুভেচ্ছা তৈরি করুন।` : `আপনিও আপনার নামে শুভেচ্ছা তৈরি করে শেয়ার করুন।`;

                if (navigator.share) {
                    try {
                        await navigator.share({
                            title: 'ঈদ মোবারক শুভেচ্ছা!',
                            text: `${shareTextFrom} আপনাকে ঈদের শুভেচ্ছা পাঠিয়েছেন! ${newLink}\n\n${sharePrompt}`,
                        });
                    } catch (error) {
                        if (error.name !== 'AbortError') { displayLinkForManualCopy(newLink); }
                    }
                } else { displayLinkForManualCopy(newLink); }
            });

            function displayLinkForManualCopy(link) {
                generatedLinkText.href = link;
                generatedLinkText.textContent = link;
                shareLinkDisplay.style.display = 'block';
                copyLinkButton.style.display = 'inline-block';
                alert('এই লিঙ্কটি কপি করে আপনার বন্ধুদের সাথে শেয়ার করুন।');
                shareLinkDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            copyLinkButton.addEventListener('click', () => {
                if (generatedLinkText.href && generatedLinkText.href !== '#') {
                    navigator.clipboard.writeText(generatedLinkText.href).then(() => {
                        copyLinkButton.textContent = 'কপি হয়েছে!';
                        setTimeout(() => { copyLinkButton.textContent = 'কপি করুন'; }, 2000);
                    }).catch(err => { alert('দুঃখিত, লিঙ্ক কপি করা যায়নি। অনুগ্রহ করে ম্যানুয়ালি কপি করুন।'); });
                } else { alert('কোনো লিঙ্ক তৈরি হয়নি।'); }
            });
        });
    </script>
    <script type='text/javascript' src='//genuinelyunacceptableweep.com/0e/cc/d2/0eccd24634e66d44bf31597e2479d3aa.js' async></script>
</body>
</html>
